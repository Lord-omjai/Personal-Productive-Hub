<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Personal Productivity Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #4361ee;
      --primary-light: #4895ef;
      --secondary: #3f37c9;
      --success: #4cc9f0;
      --completed: #4ade80;
      --dark: #1e1e2c;
      --light: #f8f9fa;
      --gray: #6c757d;
      --card-bg: #ffffff;
      --shadow: rgba(0, 0, 0, 0.1);
      --nav-text: #333; /* New variable for navigation text color */
    }

    .dark-theme {
      --primary: #4895ef;
      --primary-light: #4361ee;
      --secondary: #3a0ca3;
      --success: #4cc9f0;
      --completed: #16a34a;
      --dark: #121212;
      --light: #1e1e2c;
      --gray: #a0a0a0;
      --card-bg: #252525;
      --shadow: rgba(0, 0, 0, 0.3);
      --nav-text: #f0f0f0; /* Dark mode nav text color */
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e7f1 100%);
      color: #333;
      min-height: 100vh;
      padding: 20px;
      transition: background 0.3s ease;
    }

    .dark-theme {
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 100%);
      color: #f0f0f0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Header Styles */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: var(--card-bg);
      border-radius: 16px;
      box-shadow: 0 8px 20px var(--shadow);
      margin-bottom: 30px;
      animation: slideDown 0.6s ease-out;
    }

    @keyframes slideDown {
      from { transform: translateY(-100px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-icon {
      background: var(--primary);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: white;
      box-shadow: 0 4px 10px rgba(67, 97, 238, 0.4);
    }

    .logo-text h1 {
      font-size: 28px;
      font-weight: 700;
      background: linear-gradient(to right, var(--primary), var(--primary-light));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .logo-text p {
      font-size: 14px;
      color: var(--gray);
      margin-top: 4px;
    }

    .theme-toggle {
      background: var(--primary);
      border: none;
      padding: 12px 20px;
      border-radius: 50px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(67, 97, 238, 0.4);
    }

    .theme-toggle:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(67, 97, 238, 0.5);
    }

    /* Navigation - FIXED TEXT COLOR */
    nav {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 30px;
    }

    .nav-btn {
      background: var(--card-bg);
      border: none;
      padding: 14px 24px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px var(--shadow);
      color: var(--nav-text); /* Use the new variable for text color */
    }

    .nav-btn.active, .nav-btn:hover {
      background: var(--primary);
      color: white; /* Keep active/hover text as white */
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(67, 97, 238, 0.4);
    }

    /* Stats Overview */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 4px 10px var(--shadow);
      transition: transform 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-5px);
    }

    .stat-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(67, 97, 238, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 15px;
      font-size: 24px;
      color: var(--primary);
    }

    .stat-value {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 5px;
      color: var(--primary);
    }

    .stat-label {
      font-size: 16px;
      color: var(--gray);
    }

    /* Sections */
    .app-section {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 8px 20px var(--shadow);
      display: none;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .app-section.active {
      display: block;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--primary);
    }

    .section-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--primary);
    }

    /* Form Elements */
    .input-group {
      display: flex;
      gap: 15px;
      margin-bottom: 25px;
    }

    input, textarea, select {
      flex: 1;
      padding: 14px 20px;
      border-radius: 12px;
      border: 2px solid #e0e0e0;
      font-size: 16px;
      background: var(--light);
      transition: all 0.3s ease;
    }

    .dark-theme input, 
    .dark-theme textarea, 
    .dark-theme select {
      background: #2d2d2d;
      border-color: #444;
      color: #f0f0f0;
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    button {
      padding: 14px 25px;
      border-radius: 12px;
      border: none;
      background: var(--primary);
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    button:hover {
      background: var(--secondary);
      transform: translateY(-3px);
      box-shadow: 0 4px 10px rgba(67, 97, 238, 0.4);
    }

    .secondary-btn {
      background: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
    }

    .secondary-btn:hover {
      background: var(--primary);
      color: white;
    }

    /* Lists */
    .list-container {
      margin-top: 25px;
    }

    .list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding: 0 10px;
    }

    .search-box {
      padding: 12px 20px;
      border-radius: 50px;
      border: 2px solid #e0e0e0;
      width: 250px;
      background: var(--light);
    }

    .dark-theme .search-box {
      background: #2d2d2d;
      border-color: #444;
      color: #f0f0f0;
    }

    .item-list {
      list-style: none;
    }

    .list-item {
      background: var(--light);
      padding: 18px 25px;
      border-radius: 12px;
      margin-bottom: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      animation: slideIn 0.3s ease;
      box-shadow: 0 3px 8px var(--shadow);
      transition: transform 0.2s ease;
    }

    .dark-theme .list-item {
      background: #2d2d2d;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .list-item:hover {
      transform: translateX(5px);
    }

    .item-content {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .checkbox-container {
      position: relative;
    }

    .custom-checkbox {
      width: 24px;
      height: 24px;
      border: 2px solid var(--gray);
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .custom-checkbox.checked {
      background: var(--completed);
      border-color: var(--completed);
    }

    .custom-checkbox.checked::after {
      content: "‚úì";
      color: white;
      font-size: 14px;
      font-weight: bold;
    }

    .item-text {
      flex: 1;
    }

    .item-title {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .completed {
      text-decoration: line-through;
      color: var(--gray);
    }

    .item-date {
      font-size: 13px;
      color: var(--gray);
    }

    .item-actions {
      display: flex;
      gap: 10px;
    }

    .delete-btn {
      background: #e74c3c;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .delete-btn:hover {
      background: #c0392b;
      transform: scale(1.1);
    }

    /* Progress Bar */
    .progress-container {
      margin: 25px 0;
    }

    .progress-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .progress-bar {
      height: 12px;
      background: #e0e0e0;
      border-radius: 6px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: var(--primary);
      border-radius: 6px;
      transition: width 0.8s ease;
    }

    /* Ad Container */
    .ad-container {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      margin: 30px 0;
    }

    .ad-label {
      font-size: 14px;
      color: var(--gray);
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .ad-placeholder {
      height: 100px;
      background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #888;
      font-weight: 600;
    }

    .dark-theme .ad-placeholder {
      background: linear-gradient(45deg, #2c3e50, #34495e);
      color: #aaa;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      header {
        flex-direction: column;
        text-align: center;
        gap: 20px;
      }
      
      .input-group {
        flex-direction: column;
      }
      
      .list-header {
        flex-direction: column;
        gap: 15px;
      }
      
      .search-box {
        width: 100%;
      }
    }

    @media (max-width: 480px) {
      .nav-btn {
        padding: 12px 15px;
        font-size: 14px;
      }
      
      .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .list-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .item-actions {
        align-self: flex-end;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header>
      <div class="logo">
        <div class="logo-icon">üöÄ</div>
        <div class="logo-text">
          <h1>Productivity Hub</h1>
          <p>Organize your tasks, habits, notes, and expenses</p>
        </div>
      </div>
      <button class="theme-toggle" id="themeToggle">
        <span>üåô</span> Dark Mode
      </button>
    </header>

    <!-- Navigation -->
    <nav>
      <button class="nav-btn active" data-section="todo">
        <span>üìù</span> To-Do
      </button>
      <button class="nav-btn" data-section="habit">
        <span>‚úÖ</span> Habits
      </button>
      <button class="nav-btn" data-section="notes">
        <span>üìì</span> Notes
      </button>
      <button class="nav-btn" data-section="expense">
        <span>üí∞</span> Expenses
      </button>
      <button class="nav-btn" data-section="settings">
        <span>‚öôÔ∏è</span> Settings
      </button>
    </nav>

    <!-- Stats Overview -->
    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-icon">üìù</div>
        <div class="stat-value" id="todoCount">0</div>
        <div class="stat-label">Pending Tasks</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-value" id="habitCount">0</div>
        <div class="stat-label">Active Habits</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üìì</div>
        <div class="stat-value" id="noteCount">0</div>
        <div class="stat-label">Saved Notes</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üí∞</div>
        <div class="stat-value" id="expenseTotal">‚Çπ0</div>
        <div class="stat-label">Total Expenses</div>
      </div>
    </div>

    <!-- Ad Container -->
    <div class="ad-container">
      <div class="ad-label">Advertisement</div>
      <div class="ad-placeholder">Google AdSense Banner (728x90)</div>
    </div>

    <!-- To-Do Section -->
    <section id="todo" class="app-section active">
      <div class="section-header">
        <h2 class="section-title">To-Do List</h2>
        <div class="actions">
          <input type="text" class="search-box" id="todoSearch" placeholder="Search tasks...">
        </div>
      </div>
      
      <div class="input-group">
        <input type="text" id="todoInput" placeholder="Add new task...">
        <button onclick="addTodo()">Add Task</button>
      </div>
      
      <div class="progress-container">
        <div class="progress-header">
          <span>Task Progress</span>
          <span id="todoProgressValue">0%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="todoProgressBar" style="width: 0%"></div>
        </div>
      </div>
      
      <div class="list-container">
        <ul class="item-list" id="todoList">
          <!-- To-Do items will be added here -->
        </ul>
      </div>
    </section>

    <!-- Habit Section -->
    <section id="habit" class="app-section">
      <div class="section-header">
        <h2 class="section-title">Habit Tracker</h2>
        <div class="actions">
          <input type="text" class="search-box" id="habitSearch" placeholder="Search habits...">
        </div>
      </div>
      
      <div class="input-group">
        <input type="text" id="habitInput" placeholder="Add new habit...">
        <button onclick="addHabit()">Add Habit</button>
      </div>
      
      <div class="list-container">
        <ul class="item-list" id="habitList"></ul>
      </div>
    </section>

    <!-- Notes Section -->
    <section id="notes" class="app-section">
      <div class="section-header">
        <h2 class="section-title">Notes / Diary</h2>
        <div class="actions">
          <input type="text" class="search-box" id="noteSearch" placeholder="Search notes...">
        </div>
      </div>
      
      <textarea id="noteText" placeholder="Write your note here..."></textarea>
      
      <div class="input-group">
        <button class="secondary-btn" onclick="clearNote()">Clear</button>
        <button onclick="saveNote()">Save Note</button>
      </div>
      
      <div class="list-container">
        <ul class="item-list" id="noteList"></ul>
      </div>
    </section>

    <!-- Expense Section -->
    <section id="expense" class="app-section">
      <div class="section-header">
        <h2 class="section-title">Expense Tracker</h2>
      </div>
      
      <div class="input-group">
        <input type="text" id="expenseTitle" placeholder="Expense title">
        <input type="number" id="expenseAmount" placeholder="Amount">
        <button onclick="addExpense()">Add Expense</button>
      </div>
      
      <div class="list-container">
        <ul class="item-list" id="expenseList"></ul>
      </div>
    </section>

    <!-- Settings Section -->
    <section id="settings" class="app-section">
      <div class="section-header">
        <h2 class="section-title">Settings</h2>
      </div>
      
      <div class="setting-item">
        <h3>Password Protection</h3>
        <div class="input-group">
          <input type="password" id="currentPassword" placeholder="Current password">
          <input type="password" id="newPassword" placeholder="New password">
          <button onclick="changePassword()">Change Password</button>
        </div>
        <div class="input-group">
          <label>
            <input type="checkbox" id="passwordLockToggle" onchange="togglePasswordLock()">
            Enable password on startup
          </label>
        </div>
        <p id="passwordChangeMessage"></p>
      </div>
      
      <div class="setting-item">
        <h3>Appearance</h3>
        <div class="input-group">
          <label>
            <input type="checkbox" id="themeToggleCheckbox" onchange="toggleTheme()">
            Dark Mode
          </label>
        </div>
      </div>
    </section>

    <!-- Ad Container -->
    <div class="ad-container">
      <div class="ad-label">Advertisement</div>
      <div class="ad-placeholder">Google AdSense Banner (728x90)</div>
    </div>
  </div>

  <script>
    // Initialize app
    document.addEventListener('DOMContentLoaded', () => {
      // Load data from localStorage
      loadTodos();
      loadHabits();
      loadNotes();
      loadExpenses();
      
      // Update statistics
      updateStats();
      
      // Setup navigation
      setupNavigation();
      
      // Setup theme toggle
      setupTheme();
    });

    // Storage keys
    const TODO_STORAGE_KEY = 'todos';
    const HABIT_STORAGE_KEY = 'habits';
    const NOTE_STORAGE_KEY = 'notes';
    const EXPENSE_STORAGE_KEY = 'expenses';
    const PASSWORD_KEY = 'appPassword';
    const PASSWORD_LOCK_KEY = 'passwordLockEnabled';

    // Navigation setup
    function setupNavigation() {
      const navButtons = document.querySelectorAll('.nav-btn');
      
      navButtons.forEach(button => {
        button.addEventListener('click', () => {
          // Remove active class from all buttons
          navButtons.forEach(btn => btn.classList.remove('active'));
          
          // Add active class to clicked button
          button.classList.add('active');
          
          // Hide all sections
          document.querySelectorAll('.app-section').forEach(section => {
            section.classList.remove('active');
          });
          
          // Show the selected section
          const sectionId = button.getAttribute('data-section');
          document.getElementById(sectionId).classList.add('active');
        });
      });
    }

    // Theme setup
    function setupTheme() {
      const themeToggle = document.getElementById('themeToggle');
      const themeToggleCheckbox = document.getElementById('themeToggleCheckbox');
      
      // Check if dark theme is enabled
      const isDark = localStorage.getItem('darkTheme') === 'true';
      if (isDark) {
        document.body.classList.add('dark-theme');
        themeToggle.innerHTML = '<span>‚òÄÔ∏è</span> Light Mode';
        themeToggleCheckbox.checked = true;
      }
      
      // Toggle theme
      themeToggle.addEventListener('click', toggleTheme);
      themeToggleCheckbox.addEventListener('change', toggleTheme);
    }

    function toggleTheme() {
      const body = document.body;
      const themeToggle = document.getElementById('themeToggle');
      
      body.classList.toggle('dark-theme');
      
      if (body.classList.contains('dark-theme')) {
        themeToggle.innerHTML = '<span>‚òÄÔ∏è</span> Light Mode';
        localStorage.setItem('darkTheme', 'true');
      } else {
        themeToggle.innerHTML = '<span>üåô</span> Dark Mode';
        localStorage.setItem('darkTheme', 'false');
      }
    }

    // Update statistics
    function updateStats() {
      // To-Do stats
      const todos = JSON.parse(localStorage.getItem(TODO_STORAGE_KEY)) || [];
      const pendingTodos = todos.filter(todo => !todo.completed);
      document.getElementById('todoCount').textContent = pendingTodos.length;
      
      // Calculate completion percentage
      const completed = todos.filter(todo => todo.completed).length;
      const percentage = todos.length ? Math.round((completed / todos.length) * 100) : 0;
      document.getElementById('todoProgressValue').textContent = `${percentage}%`;
      document.getElementById('todoProgressBar').style.width = `${percentage}%`;
      
      // Habit stats
      const habits = JSON.parse(localStorage.getItem(HABIT_STORAGE_KEY)) || [];
      document.getElementById('habitCount').textContent = habits.length;
      
      // Note stats
      const notes = JSON.parse(localStorage.getItem(NOTE_STORAGE_KEY)) || [];
      document.getElementById('noteCount').textContent = notes.length;
      
      // Expense stats
      const expenses = JSON.parse(localStorage.getItem(EXPENSE_STORAGE_KEY)) || [];
      const total = expenses.reduce((sum, expense) => sum + expense.amount, 0);
      document.getElementById('expenseTotal').textContent = `‚Çπ${total.toFixed(2)}`;
    }

    // To-Do List Functions
    function loadTodos() {
      const todos = JSON.parse(localStorage.getItem(TODO_STORAGE_KEY)) || [];
      const todoList = document.getElementById('todoList');
      todoList.innerHTML = '';
      
      todos.forEach(todo => {
        const listItem = document.createElement('li');
        listItem.className = 'list-item';
        listItem.dataset.id = todo.id;
        
        listItem.innerHTML = `
          <div class="item-content">
            <div class="checkbox-container">
              <div class="custom-checkbox ${todo.completed ? 'checked' : ''}" 
                   onclick="toggleTodoCompletion('${todo.id}')"></div>
            </div>
            <div class="item-text">
              <div class="item-title ${todo.completed ? 'completed' : ''}">${todo.text}</div>
              <div class="item-date">Added: ${formatDate(todo.createdAt)}</div>
            </div>
          </div>
          <div class="item-actions">
            <div class="delete-btn" onclick="deleteTodo('${todo.id}')">üóëÔ∏è</div>
          </div>
        `;
        
        todoList.appendChild(listItem);
      });
    }

    function addTodo() {
      const input = document.getElementById('todoInput');
      const text = input.value.trim();
      
      if (!text) return;
      
      const todo = {
        id: Date.now().toString(),
        text: text,
        completed: false,
        createdAt: new Date().toISOString()
      };
      
      const todos = JSON.parse(localStorage.getItem(TODO_STORAGE_KEY)) || [];
      todos.push(todo);
      localStorage.setItem(TODO_STORAGE_KEY, JSON.stringify(todos));
      
      input.value = '';
      loadTodos();
      updateStats();
    }

    function toggleTodoCompletion(id) {
      let todos = JSON.parse(localStorage.getItem(TODO_STORAGE_KEY)) || [];
      todos = todos.map(todo => {
        if (todo.id === id) {
          return {...todo, completed: !todo.completed};
        }
        return todo;
      });
      localStorage.setItem(TODO_STORAGE_KEY, JSON.stringify(todos));
      
      loadTodos();
      updateStats();
    }

    function deleteTodo(id) {
      let todos = JSON.parse(localStorage.getItem(TODO_STORAGE_KEY)) || [];
      todos = todos.filter(todo => todo.id !== id);
      localStorage.setItem(TODO_STORAGE_KEY, JSON.stringify(todos));
      
      loadTodos();
      updateStats();
    }

    // Habit Tracker Functions
    function loadHabits() {
      const habits = JSON.parse(localStorage.getItem(HABIT_STORAGE_KEY)) || [];
      const habitList = document.getElementById('habitList');
      habitList.innerHTML = '';
      
      habits.forEach(habit => {
        const listItem = document.createElement('li');
        listItem.className = 'list-item';
        listItem.dataset.id = habit.id;
        
        listItem.innerHTML = `
          <div class="item-content">
            <div class="item-title">${habit.text}</div>
            <div class="item-date">Added: ${formatDate(habit.createdAt)}</div>
          </div>
          <div class="item-actions">
            <div class="delete-btn" onclick="deleteHabit('${habit.id}')">üóëÔ∏è</div>
          </div>
        `;
        
        habitList.appendChild(listItem);
      });
    }

    function addHabit() {
      const input = document.getElementById('habitInput');
      const text = input.value.trim();
      
      if (!text) return;
      
      const habit = {
        id: Date.now().toString(),
        text: text,
        createdAt: new Date().toISOString()
      };
      
      const habits = JSON.parse(localStorage.getItem(HABIT_STORAGE_KEY)) || [];
      habits.push(habit);
      localStorage.setItem(HABIT_STORAGE_KEY, JSON.stringify(habits));
      
      input.value = '';
      loadHabits();
      updateStats();
    }

    function deleteHabit(id) {
      let habits = JSON.parse(localStorage.getItem(HABIT_STORAGE_KEY)) || [];
      habits = habits.filter(habit => habit.id !== id);
      localStorage.setItem(HABIT_STORAGE_KEY, JSON.stringify(habits));
      
      loadHabits();
      updateStats();
    }

    // Notes Functions
    function loadNotes() {
      const notes = JSON.parse(localStorage.getItem(NOTE_STORAGE_KEY)) || [];
      const noteList = document.getElementById('noteList');
      noteList.innerHTML = '';
      
      notes.forEach(note => {
        const listItem = document.createElement('li');
        listItem.className = 'list-item';
        listItem.dataset.id = note.id;
        
        listItem.innerHTML = `
          <div class="item-content">
            <div class="item-title">${note.text.substring(0, 40)}${note.text.length > 40 ? '...' : ''}</div>
            <div class="item-date">Added: ${formatDate(note.createdAt)}</div>
          </div>
          <div class="item-actions">
            <div class="delete-btn" onclick="deleteNote('${note.id}')">üóëÔ∏è</div>
          </div>
        `;
        
        noteList.appendChild(listItem);
      });
    }

    function saveNote() {
      const textarea = document.getElementById('noteText');
      const text = textarea.value.trim();
      
      if (!text) return;
      
      const note = {
        id: Date.now().toString(),
        text: text,
        createdAt: new Date().toISOString()
      };
      
      const notes = JSON.parse(localStorage.getItem(NOTE_STORAGE_KEY)) || [];
      notes.push(note);
      localStorage.setItem(NOTE_STORAGE_KEY, JSON.stringify(notes));
      
      textarea.value = '';
      loadNotes();
      updateStats();
    }

    function clearNote() {
      document.getElementById('noteText').value = '';
    }

    function deleteNote(id) {
      let notes = JSON.parse(localStorage.getItem(NOTE_STORAGE_KEY)) || [];
      notes = notes.filter(note => note.id !== id);
      localStorage.setItem(NOTE_STORAGE_KEY, JSON.stringify(notes));
      
      loadNotes();
      updateStats();
    }

    // Expense Tracker Functions
    function loadExpenses() {
      const expenses = JSON.parse(localStorage.getItem(EXPENSE_STORAGE_KEY)) || [];
      const expenseList = document.getElementById('expenseList');
      expenseList.innerHTML = '';
      
      expenses.forEach(expense => {
        const listItem = document.createElement('li');
        listItem.className = 'list-item';
        listItem.dataset.id = expense.id;
        
        listItem.innerHTML = `
          <div class="item-content">
            <div class="item-title">${expense.title} - ‚Çπ${expense.amount.toFixed(2)}</div>
            <div class="item-date">Added: ${formatDate(expense.createdAt)}</div>
          </div>
          <div class="item-actions">
            <div class="delete-btn" onclick="deleteExpense('${expense.id}')">üóëÔ∏è</div>
          </div>
        `;
        
        expenseList.appendChild(listItem);
      });
    }

    function addExpense() {
      const titleInput = document.getElementById('expenseTitle');
      const amountInput = document.getElementById('expenseAmount');
      
      const title = titleInput.value.trim();
      const amount = parseFloat(amountInput.value);
      
      if (!title || isNaN(amount)) return;
      
      const expense = {
        id: Date.now().toString(),
        title: title,
        amount: amount,
        createdAt: new Date().toISOString()
      };
      
      const expenses = JSON.parse(localStorage.getItem(EXPENSE_STORAGE_KEY)) || [];
      expenses.push(expense);
      localStorage.setItem(EXPENSE_STORAGE_KEY, JSON.stringify(expenses));
      
      titleInput.value = '';
      amountInput.value = '';
      loadExpenses();
      updateStats();
    }

    function deleteExpense(id) {
      let expenses = JSON.parse(localStorage.getItem(EXPENSE_STORAGE_KEY)) || [];
      expenses = expenses.filter(expense => expense.id !== id);
      localStorage.setItem(EXPENSE_STORAGE_KEY, JSON.stringify(expenses));
      
      loadExpenses();
      updateStats();
    }

    // Password Functions
    function togglePasswordLock() {
      const checked = document.getElementById('passwordLockToggle').checked;
      localStorage.setItem(PASSWORD_LOCK_KEY, checked);
    }

    function changePassword() {
      const currentPassword = document.getElementById('currentPassword').value;
      const newPassword = document.getElementById('newPassword').value;
      const message = document.getElementById('passwordChangeMessage');
      
      if (!currentPassword || !newPassword) {
        message.textContent = 'Please fill in both fields';
        return;
      }
      
      const savedPassword = localStorage.getItem(PASSWORD_KEY);
      
      if (currentPassword !== savedPassword) {
        message.textContent = 'Current password is incorrect';
        return;
      }
      
      localStorage.setItem(PASSWORD_KEY, newPassword);
      message.textContent = 'Password changed successfully';
      
      document.getElementById('currentPassword').value = '';
      document.getElementById('newPassword').value = '';
    }

    // Helper function to format date
    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'short',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
    }
  </script>
</body>
</html>
